<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>False Cognates Quiz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: system-ui, -apple-system, sans-serif;
      min-height: 100vh;
      background: linear-gradient(135deg, #1e3a5f 0%, #0f172a 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding: 1.5rem 1rem 3rem;
      color: #f1f5f9;
    }

    header { text-align: center; margin-bottom: 1.5rem; }
    header h1 { font-size: 1.8rem; font-weight: 700; letter-spacing: 0.5px; color: #93c5fd; }
    header p { font-size: 0.88rem; color: #94a3b8; margin-top: 0.3rem; max-width: 480px; }

    .scorebar {
      display: flex; gap: 1.5rem;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 999px;
      padding: 0.5rem 1.5rem;
      margin-bottom: 1.5rem;
      font-size: 0.9rem;
    }
    .scorebar span { color: #cbd5e1; }
    .scorebar strong { color: #38bdf8; }

    .progress-wrap {
      width: 100%; max-width: 640px;
      background: rgba(255,255,255,0.08);
      border-radius: 999px; height: 6px;
      margin-bottom: 1.2rem; overflow: hidden;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #38bdf8, #818cf8);
      border-radius: 999px;
      transition: width 0.4s ease; width: 0%;
    }

    .card {
      background: rgba(255,255,255,0.05);
      backdrop-filter: blur(14px);
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: 20px; padding: 1.8rem;
      width: 100%; max-width: 640px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.35);
    }

    .question-num {
      font-size: 0.78rem; text-transform: uppercase;
      letter-spacing: 1px; color: #64748b; margin-bottom: 0.6rem;
    }

    #sentence {
      font-size: 1.15rem; line-height: 1.8;
      color: #e2e8f0; min-height: 3.5rem; margin-bottom: 1.4rem;
    }

    .input-row { display: flex; gap: 0.5rem; margin-bottom: 1rem; }

    input[type="text"] {
      flex: 1; padding: 0.65rem 1rem; font-size: 1rem;
      border-radius: 12px; border: 1.5px solid rgba(255,255,255,0.15);
      background: rgba(255,255,255,0.07); color: #f1f5f9; outline: none;
      transition: border 0.2s;
    }
    input[type="text"]::placeholder { color: #475569; }
    input[type="text"]:focus { border-color: #38bdf8; }
    input.correct-input { border-color: #22c55e !important; }
    input.wrong-input   { border-color: #ef4444 !important; }

    .buttons { display: flex; flex-wrap: wrap; gap: 0.6rem; }

    button {
      flex: 1 1 120px; padding: 0.65rem 1rem;
      font-size: 0.95rem; font-weight: 600;
      border-radius: 12px; border: none; cursor: pointer;
      transition: opacity 0.15s, transform 0.1s;
    }
    button:active { opacity: 0.8; transform: scale(0.97); }
    .btn-check  { background: linear-gradient(135deg, #2563eb, #4f46e5); color: #fff; }
    .btn-reveal { background: rgba(255,255,255,0.08); color: #94a3b8; border: 1px solid rgba(255,255,255,0.12); }
    .btn-next   { background: linear-gradient(135deg, #0ea5e9, #6366f1); color: #fff; }

    #feedback { margin-top: 1rem; min-height: 1.4rem; font-size: 0.97rem; font-weight: 500; }
    .fb-correct { color: #4ade80; }
    .fb-wrong   { color: #f87171; }

    #answerBlock {
      display: none; margin-top: 1rem;
      padding: 1rem 1.1rem;
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 12px; font-size: 0.93rem;
      line-height: 1.7; color: #cbd5e1;
    }
    .ans-label {
      color: #64748b; font-size: 0.75rem;
      text-transform: uppercase; letter-spacing: 0.8px;
      margin-top: 0.75rem;
    }
    .ans-label:first-child { margin-top: 0; }
    .ans-word  { color: #34d399; font-weight: 700; font-size: 1.05rem; }
    .ans-wrong { color: #f87171; }
    .ans-ok    { color: #94a3b8; }
    .ans-sent  { color: #e2e8f0; font-style: italic; }

    /* Explanation box */
    .ans-explanation {
      margin-top: 0.5rem;
      padding: 0.75rem 1rem;
      background: rgba(56, 189, 248, 0.07);
      border-left: 3px solid #38bdf8;
      border-radius: 0 8px 8px 0;
      font-size: 0.9rem;
      color: #bae6fd;
      line-height: 1.6;
    }
    .ans-explanation .wrong-def  { color: #fca5a5; font-weight: 600; }
    .ans-explanation .right-def  { color: #6ee7b7; font-weight: 600; }

    .hint { margin-top: 1rem; font-size: 0.82rem; color: #475569; text-align: center; }

    @keyframes shake {
      0%,100% { transform: translateX(0); }
      20% { transform: translateX(-6px); }
      40% { transform: translateX(6px); }
      60% { transform: translateX(-4px); }
      80% { transform: translateX(4px); }
    }
    .shake { animation: shake 0.35s ease; }

    @keyframes pop {
      0%   { transform: scale(1); }
      50%  { transform: scale(1.03); }
      100% { transform: scale(1); }
    }
    .pop { animation: pop 0.28s ease; }

    @keyframes confetti-drop {
      0%   { transform: translateY(-30px) rotate(0deg); opacity: 1; }
      100% { transform: translateY(90px) rotate(360deg); opacity: 0; }
    }
    .confetti-wrapper {
      pointer-events: none; position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      overflow: hidden; z-index: 999;
    }
    .confetti-piece {
      position: absolute; width: 8px; height: 14px;
      border-radius: 2px; animation: confetti-drop 1s ease forwards;
    }
  </style>
</head>
<body>

  <header>
    <h1>üéØ False Cognates Quiz</h1>
    <p>Each sentence contains <strong>three false cognate-like words</strong>. Only <strong>one</strong> is used incorrectly. Find it and type the correct replacement.</p>
  </header>

  <div class="scorebar">
    <span>‚úÖ Correct: <strong id="scoreCorrect">0</strong></span>
    <span>‚ùå Wrong: <strong id="scoreWrong">0</strong></span>
    <span>üìã Total: <strong id="scoreTotal">0</strong></span>
  </div>

  <div class="progress-wrap">
    <div class="progress-fill" id="progressFill"></div>
  </div>

  <div class="card" id="card">
    <div class="question-num" id="qNum">Question ‚Äî</div>
    <div id="sentence"></div>

    <div class="input-row">
      <input type="text" id="userInput" placeholder="Type the correct replacement word‚Ä¶" autocomplete="off" />
    </div>

    <div class="buttons">
      <button class="btn-check"  id="checkBtn">‚úî Check</button>
      <button class="btn-reveal" id="showBtn">üëÅ Reveal</button>
      <button class="btn-next"   id="newBtn">‚Üí New sentence</button>
    </div>

    <div id="feedback"></div>

    <div id="answerBlock">
      <div class="ans-label">The false cognate (used incorrectly)</div>
      <div id="ansWrong" class="ans-wrong"></div>
      <div class="ans-label">Should be replaced by</div>
      <div class="ans-word" id="correctWord"></div>
      <div class="ans-label">The other two were used correctly</div>
      <div id="ansOk" class="ans-ok"></div>
      <div class="ans-label">Corrected sentence</div>
      <div class="ans-sent" id="correctSentence"></div>
      <div class="ans-label">üí° Why?</div>
      <div class="ans-explanation" id="ansExplanation"></div>
    </div>

    <div class="hint">üí° All three words look like French ‚Äî but only one is misused. Read carefully.</div>
  </div>

  <script>
    const items = [
      {
        sentence: "My professor told me to write a phrase explaining what makes a library different from a bookstore.",
        falseWord: "phrase", correctWord: "sentence",
        otherTwo: ["professor", "library"],
        correctedSentence: "My professor told me to write a sentence explaining what makes a library different from a bookstore.",
        explanation: "<span class='wrong-def'>\"Phrase\"</span> means a group of words without a subject or verb (e.g. \"in the morning\"). When you write a complete thought with a subject and verb, ending with a period, that is a <span class='right-def'>\"sentence\"</span>."
      },
      {
        sentence: "The conductor asked his relative to stay home because the temperature outside was dangerous.",
        falseWord: "temperature", correctWord: "weather",
        otherTwo: ["conductor", "stay"],
        correctedSentence: "The conductor asked his relative to stay home because the weather outside was dangerous.",
        explanation: "<span class='wrong-def'>\"Temperature\"</span> refers only to a degree of heat or cold on a scale (e.g. 30¬∞C). When talking about rain, wind, storms or general outdoor conditions, the correct word is <span class='right-def'>\"weather\"</span>."
      },
      {
        sentence: "The photographer used a crayon to label her supplies before the shoot.",
        falseWord: "crayon", correctWord: "pencil",
        otherTwo: ["photographer", "supplies"],
        correctedSentence: "The photographer used a pencil to label her supplies before the shoot.",
        explanation: "<span class='wrong-def'>\"Crayon\"</span> is a waxy colouring stick used by children to draw. To write or label something, you need a <span class='right-def'>\"pencil\"</span>, which is a writing instrument with a graphite tip."
      },
      {
        sentence: "My relative bought all his furniture at the library across the street.",
        falseWord: "library", correctWord: "bookstore",
        otherTwo: ["relative", "furniture"],
        correctedSentence: "My relative bought all his furniture at the bookstore across the street.",
        explanation: "<span class='wrong-def'>\"Library\"</span> is a place where you borrow books for free with a membership card ‚Äî you cannot buy anything there. A <span class='right-def'>\"bookstore\"</span> is a store where books and supplies are sold."
      },
      {
        sentence: "The actor forgot his phrase and began to cry on stage during the play.",
        falseWord: "cry", correctWord: "scream",
        otherTwo: ["actor", "play"],
        correctedSentence: "The actor forgot his phrase and began to scream on stage during the play.",
        explanation: "<span class='wrong-def'>\"Cry\"</span> means to shed tears because you are sad. To raise your voice loudly at someone or in frustration, the correct word is <span class='right-def'>\"scream\"</span>."
      },
      {
        sentence: "The comedian needed a doctor because he hurt his figure during rehearsal.",
        falseWord: "figure", correctWord: "face",
        otherTwo: ["comedian", "doctor"],
        correctedSentence: "The comedian needed a doctor because he hurt his face during rehearsal.",
        explanation: "<span class='wrong-def'>\"Figure\"</span> refers to the shape or form of a person's entire body. The part of your head that includes your eyes, nose and mouth is your <span class='right-def'>\"face\"</span>."
      },
      {
        sentence: "My professor is very fine ‚Äî she never gives severe punishments to her students.",
        falseWord: "fine", correctWord: "kind",
        otherTwo: ["professor", "severe"],
        correctedSentence: "My professor is very kind ‚Äî she never gives severe punishments to her students.",
        explanation: "<span class='wrong-def'>\"Fine\"</span> as an adjective means \"very well\" or \"all right\" (e.g. \"I'm fine\"). To describe someone who is helpful and caring, use <span class='right-def'>\"kind\"</span>."
      },
      {
        sentence: "During the vacancy, the infant stayed in the basement with his parents every evening.",
        falseWord: "vacancy", correctWord: "vacation",
        otherTwo: ["infant", "basement"],
        correctedSentence: "During the vacation, the infant stayed in the basement with his parents every evening.",
        explanation: "<span class='wrong-def'>\"Vacancy\"</span> means an empty space or unoccupied position (e.g. a job vacancy). A period of travel or time off from work is a <span class='right-def'>\"vacation\"</span>."
      },
      {
        sentence: "The sensible child began to cry when the strict teacher gave her a low mark.",
        falseWord: "sensible", correctWord: "sensitive",
        otherTwo: ["strict", "mark"],
        correctedSentence: "The sensitive child began to cry when the strict teacher gave her a low mark.",
        explanation: "<span class='wrong-def'>\"Sensible\"</span> means having good judgment and being wise. A child who cries easily and is emotionally delicate is <span class='right-def'>\"sensitive\"</span>."
      },
      {
        sentence: "My relative is a comedian who actually stays in a cave when he travels for shows.",
        falseWord: "cave", correctWord: "basement",
        otherTwo: ["comedian", "actually"],
        correctedSentence: "My relative is a comedian who actually stays in a basement when he travels for shows.",
        explanation: "<span class='wrong-def'>\"Cave\"</span> is a natural hole in the earth, possibly home to bears or bats. The part of a house below ground level is the <span class='right-def'>\"basement\"</span>."
      },
      {
        sentence: "She demanded the conductor why the driver was going so fast.",
        falseWord: "demanded", correctWord: "asked",
        otherTwo: ["conductor", "driver"],
        correctedSentence: "She asked the conductor why the driver was going so fast.",
        explanation: "<span class='wrong-def'>\"Demand\"</span> means to request something forcefully or seriously. To pose a polite question to someone, use <span class='right-def'>\"ask\"</span>."
      },
      {
        sentence: "The doctor told the infant to rest and take his medicine twice a day.",
        falseWord: "rest", correctWord: "stay",
        otherTwo: ["doctor", "medicine"],
        correctedSentence: "The doctor told the infant to stay home and take his medicine twice a day.",
        explanation: "<span class='wrong-def'>\"Rest\"</span> means to stop for a moment and take a break. To live in or remain at a place, the correct word is <span class='right-def'>\"stay\"</span>."
      },
      {
        sentence: "My relative works with dangerous mechanics in a factory and is currently looking for a new job.",
        falseWord: "mechanics", correctWord: "machinery",
        otherTwo: ["relative", "currently"],
        correctedSentence: "My relative works with dangerous machinery in a factory and is currently looking for a new job.",
        explanation: "<span class='wrong-def'>\"Mechanic\"</span> refers to a person who repairs engines. The dangerous equipment and machines in a factory are called <span class='right-def'>\"machinery\"</span>."
      },
      {
        sentence: "The photograph took a note of everyone's name at the family reunion.",
        falseWord: "photograph", correctWord: "photographer",
        otherTwo: ["note", "relative"],
        correctedSentence: "The photographer took a note of everyone's name at the family reunion.",
        explanation: "<span class='wrong-def'>\"Photograph\"</span> is a picture (a noun referring to an image). The person who takes pictures is a <span class='right-def'>\"photographer\"</span>."
      },
      {
        sentence: "She is a sympathetic teacher who gives good marks and stays after class to help.",
        falseWord: "sympathetic", correctWord: "nice",
        otherTwo: ["marks", "stay"],
        correctedSentence: "She is a nice teacher who gives good marks and stays after class to help.",
        explanation: "<span class='wrong-def'>\"Sympathetic\"</span> in English means sensitive to other people's emotions ‚Äî it does not mean pleasant or agreeable. A teacher who is pleasant and helpful is described as <span class='right-def'>\"nice\"</span>."
      },
      {
        sentence: "The comedian was sympathetic and always gentle with children in the audience.",
        falseWord: "gentle", correctWord: "nice",
        otherTwo: ["comedian", "sympathetic"],
        correctedSentence: "The comedian was sympathetic and always nice with children in the audience.",
        explanation: "<span class='wrong-def'>\"Gentle\"</span> means soft or delicate (e.g. a gentle touch). To say someone is polite and pleasant to others, use <span class='right-def'>\"nice\"</span>."
      },
      {
        sentence: "I need to command a pencil from the bookstore before my exam next week.",
        falseWord: "command", correctWord: "order",
        otherTwo: ["pencil", "bookstore"],
        correctedSentence: "I need to order a pencil from the bookstore before my exam next week.",
        explanation: "<span class='wrong-def'>\"Command\"</span> means to officially tell someone to do something (a military or authority context). To request goods from a business, the correct word is <span class='right-def'>\"order\"</span>."
      },
      {
        sentence: "My teacher was severe when I forgot my supplies at home during our vacation.",
        falseWord: "severe", correctWord: "strict",
        otherTwo: ["teacher", "supplies"],
        correctedSentence: "My teacher was strict when I forgot my supplies at home during our vacation.",
        explanation: "<span class='wrong-def'>\"Severe\"</span> means intense or violent (e.g. a severe storm). A teacher who enforces rules firmly and has high discipline is <span class='right-def'>\"strict\"</span>."
      },
      {
        sentence: "The actor checked his note and actually stayed calm before the play.",
        falseWord: "actually", correctWord: "currently",
        otherTwo: ["actor", "play"],
        correctedSentence: "The actor checked his note and is currently staying calm before the play.",
        explanation: "<span class='wrong-def'>\"Actually\"</span> means \"in fact\" and is used to correct or emphasize information. To say something is happening right now, at this moment, use <span class='right-def'>\"currently\"</span>."
      },
      {
        sentence: "The professor gave each relative a note explaining the low marks on the exam.",
        falseWord: "relative", correctWord: "student",
        otherTwo: ["professor", "marks"],
        correctedSentence: "The professor gave each student a note explaining the low marks on the exam.",
        explanation: "<span class='wrong-def'>\"Relative\"</span> means anyone in your family (aunt, uncle, cousin, etc.). The people in a class who receive grades are <span class='right-def'>\"students\"</span>."
      },
      {
        sentence: "The comedian stayed in a cave while his actor friend rested in a proper hotel.",
        falseWord: "cave", correctWord: "basement",
        otherTwo: ["comedian", "actor"],
        correctedSentence: "The comedian stayed in a basement while his actor friend rested in a proper hotel.",
        explanation: "<span class='wrong-def'>\"Cave\"</span> is a natural hole in the earth. The underground level of a building or house is the <span class='right-def'>\"basement\"</span>."
      },
      {
        sentence: "During my vacancy, I saw a piece at a beautiful theatre downtown.",
        falseWord: "vacancy", correctWord: "vacation",
        otherTwo: ["piece", "theatre"],
        correctedSentence: "During my vacation, I saw a piece at a beautiful theatre downtown.",
        explanation: "<span class='wrong-def'>\"Vacancy\"</span> refers to an empty space or available position, not a period of leisure. Time spent away from home for travel and recreation is a <span class='right-def'>\"vacation\"</span>."
      },
      {
        sentence: "My professor is actually very fine ‚Äî she explains every sentence clearly.",
        falseWord: "fine", correctWord: "kind",
        otherTwo: ["professor", "sentence"],
        correctedSentence: "My professor is actually very kind ‚Äî she explains every sentence clearly.",
        explanation: "<span class='wrong-def'>\"Fine\"</span> means \"okay\" or \"all right\" (e.g. \"I'm fine, thank you\"). To describe someone who is helpful and caring by nature, use <span class='right-def'>\"kind\"</span>."
      },
      {
        sentence: "The sensible infant cried when the conductor screamed at the passengers.",
        falseWord: "sensible", correctWord: "sensitive",
        otherTwo: ["infant", "conductor"],
        correctedSentence: "The sensitive infant cried when the conductor screamed at the passengers.",
        explanation: "<span class='wrong-def'>\"Sensible\"</span> means wise and having good judgment. An infant who cries easily and is emotionally delicate is <span class='right-def'>\"sensitive\"</span>."
      },
      {
        sentence: "My relative demanded the doctor why the medicine was so expensive.",
        falseWord: "demanded", correctWord: "asked",
        otherTwo: ["relative", "doctor"],
        correctedSentence: "My relative asked the doctor why the medicine was so expensive.",
        explanation: "<span class='wrong-def'>\"Demand\"</span> is used for forceful or authoritative requests. To pose a question politely to someone, the correct word is <span class='right-def'>\"ask\"</span>."
      },
      {
        sentence: "The photographer stayed in the cave below the old house during the severe storm.",
        falseWord: "cave", correctWord: "basement",
        otherTwo: ["photographer", "severe"],
        correctedSentence: "The photographer stayed in the basement below the old house during the severe storm.",
        explanation: "<span class='wrong-def'>\"Cave\"</span> is a natural underground space found in rock or earth, not part of a house. The underground level of a house is the <span class='right-def'>\"basement\"</span>."
      },
      {
        sentence: "My teacher commanded a new set of supplies and a crayon from the catalogue.",
        falseWord: "commanded", correctWord: "ordered",
        otherTwo: ["teacher", "crayon"],
        correctedSentence: "My teacher ordered a new set of supplies and a crayon from the catalogue.",
        explanation: "<span class='wrong-def'>\"Command\"</span> means to give an official instruction or directive. When requesting goods from a business or catalogue, the correct word is <span class='right-def'>\"order\"</span>."
      },
      {
        sentence: "She is a fine doctor who gives gentle care to every infant in the clinic.",
        falseWord: "fine", correctWord: "kind",
        otherTwo: ["doctor", "infant"],
        correctedSentence: "She is a kind doctor who gives gentle care to every infant in the clinic.",
        explanation: "<span class='wrong-def'>\"Fine\"</span> means \"all right\" or \"okay\", not caring or helpful. To describe someone who is generous and helpful by nature, use <span class='right-def'>\"kind\"</span>."
      },
      {
        sentence: "The comedian cried at the audience when he forgot his sentence on stage.",
        falseWord: "cried", correctWord: "screamed",
        otherTwo: ["comedian", "sentence"],
        correctedSentence: "The comedian screamed at the audience when he forgot his sentence on stage.",
        explanation: "<span class='wrong-def'>\"Cry\"</span> means to shed tears out of sadness. To raise your voice loudly and angrily at someone, the correct word is <span class='right-def'>\"scream\"</span>."
      },
      {
        sentence: "My relative works with dangerous mechanics and currently lives near a library.",
        falseWord: "library", correctWord: "bookstore",
        otherTwo: ["relative", "currently"],
        correctedSentence: "My relative works with dangerous mechanics and currently lives near a bookstore.",
        explanation: "<span class='wrong-def'>\"Library\"</span> is a place to borrow books for free ‚Äî you cannot buy things there. A place that sells books and other supplies is a <span class='right-def'>\"bookstore\"</span>."
      },
      {
        sentence: "The photographer took pictures of the figure on the wall and the child in the basement.",
        falseWord: "figure", correctWord: "face",
        otherTwo: ["photographer", "basement"],
        correctedSentence: "The photographer took pictures of the face on the wall and the child in the basement.",
        explanation: "<span class='wrong-def'>\"Figure\"</span> refers to the shape or form of someone's whole body. The part of the head with the eyes, nose and mouth is the <span class='right-def'>\"face\"</span>."
      },
      {
        sentence: "The actor was sympathetic and actually gave a fine performance in the play.",
        falseWord: "fine", correctWord: "kind",
        otherTwo: ["actor", "play"],
        correctedSentence: "The actor was sympathetic and actually gave a kind performance in the play.",
        explanation: "<span class='wrong-def'>\"Fine\"</span> as an adjective means \"okay\" or \"all right\". To describe a performance or person as generous and warm, use <span class='right-def'>\"kind\"</span>."
      }
    ];

    let currentIndex = -1;
    let answered = false;
    let scoreCorrect = 0, scoreWrong = 0, scoreTotal = 0;
    let usedIndices = [];

    function updateScore() {
      document.getElementById("scoreCorrect").textContent = scoreCorrect;
      document.getElementById("scoreWrong").textContent   = scoreWrong;
      document.getElementById("scoreTotal").textContent   = scoreTotal;
      const pct = Math.min(100, Math.round((usedIndices.length / items.length) * 100));
      document.getElementById("progressFill").style.width = pct + "%";
    }

    function pickRandomItem() {
      if (usedIndices.length === items.length) usedIndices = [];
      let idx;
      do { idx = Math.floor(Math.random() * items.length); }
      while (usedIndices.includes(idx));
      usedIndices.push(idx);
      currentIndex = idx;
      answered = false;

      const item = items[currentIndex];
      document.getElementById("qNum").textContent = `Question ${usedIndices.length} / ${items.length}`;
      document.getElementById("sentence").textContent = item.sentence;
      document.getElementById("userInput").value = "";
      document.getElementById("userInput").className = "";
      document.getElementById("feedback").textContent = "";
      document.getElementById("feedback").className = "";
      document.getElementById("answerBlock").style.display = "none";

      document.getElementById("card").classList.add("pop");
      setTimeout(() => document.getElementById("card").classList.remove("pop"), 300);
      updateScore();
    }

    function normalise(str) {
      return str.trim().toLowerCase().replace(/ed$/, "").replace(/s$/, "");
    }

    function checkAnswer() {
      if (currentIndex < 0 || answered) return;
      const userRaw  = document.getElementById("userInput").value;
      const user     = normalise(userRaw);
      const correct  = normalise(items[currentIndex].correctWord);
      const feedback = document.getElementById("feedback");
      const input    = document.getElementById("userInput");

      if (!userRaw.trim()) {
        feedback.textContent = "‚úèÔ∏è Please type your answer first.";
        feedback.className = "fb-wrong";
        return;
      }

      scoreTotal++;
      answered = true;

      if (user === correct) {
        scoreCorrect++;
        feedback.textContent = "‚úÖ Correct! Well done.";
        feedback.className = "fb-correct";
        input.classList.add("correct-input");
        spawnConfetti();
      } else {
        scoreWrong++;
        feedback.textContent = `‚ùå Not quite. The false cognate was "${items[currentIndex].falseWord}".`;
        feedback.className = "fb-wrong";
        input.classList.add("wrong-input");
        document.getElementById("card").classList.add("shake");
        setTimeout(() => document.getElementById("card").classList.remove("shake"), 350);
        showSolution();
      }
      updateScore();
    }

    function showSolution() {
      if (currentIndex < 0) return;
      answered = true;
      const item = items[currentIndex];
      document.getElementById("ansWrong").textContent         = `"${item.falseWord}"`;
      document.getElementById("correctWord").textContent      = item.correctWord;
      document.getElementById("ansOk").textContent            = item.otherTwo.map(w => `"${w}"`).join("  &  ");
      document.getElementById("correctSentence").textContent  = item.correctedSentence;
      document.getElementById("ansExplanation").innerHTML     = item.explanation;
      document.getElementById("answerBlock").style.display    = "block";
    }

    function spawnConfetti() {
      const wrapper = document.createElement("div");
      wrapper.className = "confetti-wrapper";
      const colors = ["#38bdf8","#818cf8","#34d399","#fbbf24","#f472b6"];
      for (let i = 0; i < 35; i++) {
        const p = document.createElement("div");
        p.className = "confetti-piece";
        p.style.left = Math.random() * 100 + "vw";
        p.style.top  = Math.random() * 30 + "vh";
        p.style.background = colors[Math.floor(Math.random() * colors.length)];
        p.style.animationDelay = Math.random() * 0.5 + "s";
        p.style.transform = `rotate(${Math.random()*360}deg)`;
        wrapper.appendChild(p);
      }
      document.body.appendChild(wrapper);
      setTimeout(() => wrapper.remove(), 1600);
    }

    document.getElementById("checkBtn").addEventListener("click", checkAnswer);
    document.getElementById("showBtn").addEventListener("click", showSolution);
    document.getElementById("newBtn").addEventListener("click", pickRandomItem);
    document.getElementById("userInput").addEventListener("keydown", e => {
      if (e.key === "Enter") checkAnswer();
    });

    pickRandomItem();
  </script>
</body>
</html>
